<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="author" content="All Tool AI" />
  <link rel="canonical" href="https://www.alltoolai.com/zoom-qr-code-generator" />

  <!-- Primary meta -->
  <title>Zoom QR Code Generator | Create Free Zoom Meeting QR Codes (PNG/PDF)</title>
  <meta name="description" content="Generate Zoom meeting QR codes online. Enter Meeting ID + passcode, add a topic label, customize colors, and download high res PNG/PDF. 100% client side, no sign ups, private.">
  <meta name="keywords" content="Zoom QR code, Zoom QR code generator, create QR for Zoom meeting, Zoom meeting QR code free, Zoom passcode QR, join Zoom by QR code, Zoom link QR, generate Zoom QR online">
  <meta name="robots" content="index, follow, max-snippet, max-image-preview" />

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Zoom QR Code Generator | Create Free Zoom Meeting QR Codes (PNG/PDF)">
  <meta property="og:description" content="Generate Zoom meeting QR codes online. Enter Meeting ID + passcode, add a topic label, customize colors, and download high res PNG/PDF. Private, fast, and free.">
  <meta property="og:url" content="https://www.alltoolai.com/zoom-qr-code-generator">
  <meta property="og:image" content="https://www.alltoolai.com/assets/img/zoom-qr-code-generator-og.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Zoom QR Code Generator | Free PNG/PDF">
  <meta name="twitter:description" content="Create a Zoom meeting QR code with Meeting ID + passcode. Customize colors and download high res PNG/PDF. 100% client side.">
  <meta name="twitter:image" content="https://www.alltoolai.com/assets/img/zoom-qr-code-generator-og.png">

  <!-- GEO/Hreflang (add more locales later if you localize) -->
  <link rel="alternate" hreflang="x-default" href="https://www.alltoolai.com/zoom-qr-code-generator" />
  <link rel="alternate" hreflang="en" href="https://www.alltoolai.com/zoom-qr-code-generator" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "@id": "https://www.alltoolai.com/zoom-qr-code-generator#breadcrumb",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://www.alltoolai.com/" },
      { "@type": "ListItem", "position": 2, "name": "QR Generator Tools", "item": "https://www.alltoolai.com/qr-generator-tools" },
      { "@type": "ListItem", "position": 3, "name": "Zoom QR Code Generator", "item": "https://www.alltoolai.com/zoom-qr-code-generator" }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Zoom QR Code Generator",
    "url": "https://www.alltoolai.com/zoom-qr-code-generator",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web",
    "isAccessibleForFree": true,
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "description": "Generate Zoom meeting QR codes online. Enter Meeting ID and optional passcode, add a topic label, customize colors, and download high resolution PNG/PDF. 100% client side, no sign ups, private.",
    "areaServed": "Worldwide",
    "inLanguage": ["en"],
    "browserRequirements": "Requires a modern browser with JavaScript enabled",
    "featureList": [
      "Zoom meeting link QR codes",
      "Passcode support",
      "Custom colors and topic text",
      "High res PNG/PDF export",
      "Client side only"
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Is this Zoom QR code generator private and secure?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. Everything runs locally in your browser. We don’t upload, store, or share your data. Your information is 100% confidential and secure."
        }
      },
      {
        "@type": "Question",
        "name": "What Zoom details can I encode?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You can encode a Zoom meeting link using the Meeting ID. Optionally include the passcode and a topic label displayed above the QR code image."
        }
      },
      {
        "@type": "Question",
        "name": "Can I customize the QR code?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. Choose foreground/background colors and add a topic label. For best scan results, keep a dark foreground on a light background."
        }
      },
      {
        "@type": "Question",
        "name": "What formats can I download?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Download high resolution PNG or PDF suitable for web, print posters, signage, and slides."
        }
      },
      {
        "@type": "Question",
        "name": "Does the QR work worldwide?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. It works anywhere Zoom is accessible. Just scan with a smartphone camera to open the Zoom join page or app."
        }
      },
      {
        "@type": "Question",
        "name": "Are you affiliated with Zoom?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. This is an independent tool. Zoom and the Zoom logo are trademarks of Zoom Video Communications, Inc."
        }
      }
    ]
  }
  </script>

  <!-- FAVICON -->
  <link rel="icon" href="/assets/svg/logo.svg" type="image/svg+xml">

  <!-- Preconnect for Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Non-blocking load for Google Fonts stylesheet -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" as="style" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" />

  <!-- Deferred scripts that are essential for the tool to function on load -->
  <!-- <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script> -->

  <!-- QRCode.js (replace RawGit with a reliable CDN) -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js" defer></script>
    
  <!-- Non-blocking load for your Tailwind build -->
  <link rel="preload" href="/assets/style/style.css" as="style" />
  <link rel="stylesheet" href="/assets/style/style.css" media="print" onload="this.media='all'" />
  <link rel="stylesheet" href="/assets/style/style.css" />
    
  <script src="/assets/js/header.js" defer></script>
  <script src="/assets/qr/qr-ft.js" defer></script>
  <script src="/assets/js/main.js" defer></script>
  
  <style>
    .color-link9{
      color: oklch(54.6% 0.245 262.881);
      font-weight: 750;
    }
  </style>

</head>
<body class="bg-slate-200 font-sans text-slate-800 flex min-h-screen flex-col transition-colors duration-300 dark:bg-slate-900 dark:text-slate-200">

<div id="header-placeholder"></div>

<main class="flex-grow w-full">
    <div class="p-4 sm:p-6 mt-16 mx-auto">
        <div class="mb-4">
          <div id="topad-1" aria-label="Top Ad 1"></div>
        </div>

        <div class="lg:grid lg:grid-cols-[side_bar] lg:gap-4">
            <div class="min-w-0 overflow-hidden">
                <section class="bg-white p-4 sm:p-6 lg:p-8 rounded-2xl border border-indigo-300 dark:bg-slate-800 dark:border-slate-700">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl p-1 lg:text-4xl font-extrabold bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 bg-clip-text text-transparent">Zoom QR Code Generator</h1>
                        <p class="mt-2 max-w-2xl mx-auto text-lg text-slate-600 dark:text-slate-400">A professional client-side tool to generate and customize QR codes for Zoom.</p>
                    </div>
                    
                    <div class="max-w-7xl mx-auto">
                        <section class="input-section" aria-labelledby="input-heading">
                            <div class="section-header flex justify-between items-center mb-4">
                                <h2 id="input-heading" class="text-2xl font-bold text-slate-800 dark:text-slate-100">Input</h2>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div>
                                    <label for="meeting-id" class="block text-base font-medium text-slate-700 dark:text-slate-300">Meeting ID:</label>
                                    <input type="text" id="meeting-id" class="w-full p-2 border border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600" placeholder="Enter meeting ID">
                                </div>
                                <div>
                                    <label for="password-input" class="block text-base font-medium text-slate-700 dark:text-slate-300">Meeting Password (Optional):</label>
                                    <input type="text" id="password-input" class="w-full p-2 border border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600" placeholder="Enter meeting password">
                                </div>
                            </div>
                            <div class="mt-4">
                                <label for="meeting-topic" class="block text-base font-medium text-slate-700 dark:text-slate-300">Meeting Topic (Optional):</label>
                                <input type="text" id="meeting-topic" class="w-full p-2 border border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600" placeholder="Enter topic to display on QR code">
                            </div>
                            <div class="error-message text-red-600 dark:text-red-400 mt-2" id="error-message" aria-live="polite"></div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div>
                                    <label for="fg-color" class="block text-base font-medium text-slate-700 dark:text-slate-300">Foreground Color</label>
                                    <input type="color" id="fg-color" value="#2D8CFF" class="mt-1 h-10 w-full border border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600">
                                </div>
                                <div>
                                    <label for="bg-color" class="block text-base font-medium text-slate-700 dark:text-slate-300">Background Color</label>
                                    <input type="color" id="bg-color" value="#ffffff" class="mt-1 h-10 w-full border border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600">
                                </div>
                            </div>



                            <div class="button-group mt-4 flex gap-4">
                                <button id="generate-btn" class="w-full sm:w-auto flex-grow text-white bg-indigo-600 hover:bg-indigo-700 font-semibold rounded-lg text-lg px-5 py-3 transition-all dark:bg-indigo-500 dark:hover:bg-indigo-600">Generate</button>
                                <button id="clear-btn" class="w-full sm:w-auto bg-slate-200 hover:bg-slate-300 text-slate-800 font-semibold rounded-lg text-base px-5 py-3 transition-colors dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-slate-200">Clear</button>
                            </div>
                        </section>

                        <section class="output-section mt-8" aria-labelledby="output-heading">
                            <div class="section-header mb-4"><h2 id="output-heading" class="text-2xl font-bold text-slate-800 dark:text-slate-100">Preview</h2></div>
                            <div id="qr-code-preview-wrapper" class="mt-2 w-full flex justify-center items-center bg-slate-100 dark:bg-slate-900 rounded-lg" style="overflow: hidden; min-height: 250px;">
                                <div id="qr-code-preview" class="p-2 bg-slate-100"></div>
                                <p id="preview-placeholder" class="text-slate-500 dark:text-slate-400">QR code preview will appear here</p>
                            </div>
                            <div class="download-wrapper mt-4 flex gap-4">
                                <button id="download-png-btn" class="w-full sm:w-auto flex-grow text-white bg-green-600 hover:bg-green-700 font-semibold rounded-lg text-lg px-5 py-3 transition-all dark:bg-green-500 dark:hover:bg-green-600" disabled>Download PNG</button>
                                <button id="download-pdf-btn" class="w-full sm:w-auto flex-grow text-white bg-green-600 hover:bg-green-700 font-semibold rounded-lg text-lg px-5 py-3 transition-all dark:bg-green-500 dark:hover:bg-green-600" disabled>Download PDF</button>
                            </div>
                        </section>
                    </div>
                </section>

                <div class="my-4">
                  <div id="midad-1" aria-label="Mid Ad 1"></div>
                </div>

                <div class="mx-auto text-slate-800 dark:text-slate-200 text-center mt-8">
                  
                <section class="mb-8">
                  <h2 class="text-3xl font-bold mb-6">Fast, Free, Private Zoom QR Code Generator</h2>
                  <p class="text-lg font-medium">
                    Create Zoom meeting QR codes in seconds. Enter the Meeting ID, optionally add a passcode and topic label, customize colors, and download crisp PNG or PDF 100% client side, no sign ups, lifetime free.
                  </p>
                </section>

                <section class="mb-10">
                  <h3 class="text-2xl font-semibold mb-4">Why people love this Zoom QR generator</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4 text-left">
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">One scan joining</h4>
                      <p>Turn your Zoom join link into a scannable QR code for instant access.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Passcode support</h4>
                      <p>Include the meeting passcode inside the QR so guests don’t have to type.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Custom look</h4>
                      <p>Choose foreground/background colors and add a topic label above the code.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">High res exports</h4>
                      <p>Download PNG or PDF for slides, posters, signage, handouts, and web.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Private by design</h4>
                      <p>Everything runs locally in your browser. We never send or store your data.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Free forever</h4>
                      <p>Unlimited generations, no watermarks, no account required.</p>
                    </div>
                  </div>
                </section>

                <section class="mb-10">
                  <h3 class="text-2xl font-semibold mb-4">Popular uses worldwide</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-left">
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Classrooms & training</h4>
                      <p>Project a QR on slides so students or attendees can join instantly.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Events & conferences</h4>
                      <p>Place QRs on schedules, booths, or check in desks to reduce friction.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Offices & lobbies</h4>
                      <p>Put a QR on signage or tablets so visitors can join supervised calls.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Nonprofits & communities</h4>
                      <p>Share weekly meeting QRs across social posts and newsletters.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Churches & clubs</h4>
                      <p>Print QRs on bulletins or screens for easy remote participation.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Restaurants & venues</h4>
                      <p>Display help or reservation calls via a quick QR scan.</p>
                    </div>
                  </div>
                </section>

                  <div class="my-4">
                    <div id="midad-2" aria-label="Mid Ad 2"></div>
                  </div>

                <section class="mb-10 text-left">
                  <h3 class="text-2xl font-semibold mb-4">How to create a Zoom QR code</h3>
                  <ol class="list-decimal pl-5 space-y-2">
                    <li>Enter your Zoom Meeting ID.</li>
                    <li>Optional: add the Passcode and a Topic label (e.g., “Weekly Stand up”).</li>
                    <li>Choose colors and click “Generate” to preview.</li>
                    <li>Download PNG or PDF and test by scanning with your phone camera.</li>
                    <li>Tip: You can also encode a deep link like <code>zoommtg://zoom.us/join?confno=MEETING_ID&amp;pwd=PASSCODE</code> for opening the Zoom app directly.</li>
                  </ol>
                  <p class="mt-3 text-sm text-slate-600 dark:text-slate-400">
                    Keep strong contrast (dark foreground on light background) for best scan results.
                  </p>
                </section>

                <section class="mb-10 text-left">
                  <h3 class="text-2xl font-semibold mb-4">Best practices</h3>
                  <ul class="list-disc pl-5 space-y-2">
                    <li>Use high contrast and leave a quiet zone (margin) around the QR.</li>
                    <li>Increase size for posters; avoid placing on busy or low contrast backgrounds.</li>
                    <li>If your passcode changes, regenerate a new QR before sharing.</li>
                    <li>Test across different devices and lighting conditions.</li>
                    <li>Add a short instruction like “Scan to join our Zoom meeting.”</li>
                  </ul>
                </section>

                <section class="mb-10">
                  <h3 class="text-2xl font-semibold mb-4">Global availability (GEO)</h3>
                  <p class="text-lg">
                    Built for users worldwide: USA, UK, Canada, Australia, India, EU (Germany, France, Spain, Italy, Netherlands), Middle East (UAE, Saudi Arabia), Asia (Singapore, Malaysia, Philippines, Indonesia, Japan, South Korea), Africa (Nigeria, South Africa, Egypt), and Latin America (Brazil, Mexico, Argentina). If your browser works, our Zoom QR generator works.
                  </p>
                </section>

                  <div class="my-4">
                    <div id="midad-3" aria-label="Mid Ad 3"></div>
                  </div>

                <section class="mb-10 text-left">
                  <h3 class="text-3xl font-bold mb-6 text-center">Frequently Asked Questions</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Is it private and secure?</h4>
                      <p>Yes. Everything runs locally in your browser. We don’t upload or store your data.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Which Zoom details are supported?</h4>
                      <p>Meeting ID with optional passcode. You can also encode deep links for the Zoom app.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Can I add a topic label?</h4>
                      <p>Yes, add a short title that appears above the QR code to guide participants.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Why won’t my QR scan?</h4>
                      <p>Use high contrast, increase size, add margins, and test in good lighting.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Is it really free?</h4>
                      <p>Yes. Unlimited generations, no sign ups. Lifetime free.</p>
                    </div>
                    <div class="bg-slate-100 p-4 dark:bg-slate-800 rounded-lg">
                      <h4 class="text-lg font-semibold mb-2">Affiliation</h4>
                      <p>Not affiliated with or endorsed by Zoom Video Communications, Inc.</p>
                    </div>
                  </div>
                </section>
                </div>
            </div>

            <aside class="hidden lg:flex flex-col">
              <div id="sidead-1" aria-label="Sidebar Ad 1"></div>
              <div id="sidead-3" aria-label="Sidebar Ad 3"></div>
              <div id="sidead-5" aria-label="Sidebar Ad 5"></div>
              <div id="sidead-7" aria-label="Sidebar Ad 7"></div>
            </aside>

            <aside class="hidden lg:flex flex-col">
              <div id="sidead-2" aria-label="Sidebar Ad 2"></div>
              <div id="sidead-4" aria-label="Sidebar Ad 4"></div>
              <div id="sidead-6" aria-label="Sidebar Ad 6"></div>
              <div id="sidead-8" aria-label="Sidebar Ad 8"></div>
            </aside>
        </div>

        <div class="mb-4">
          <div id="topad-2" aria-label="Top Ad 2"></div>
        </div>

        <section class="mb-10">
          <h3 class="text-2xl text-center font-semibold mb-4">Explore more free qr generator tools</h3>
            <p class="text-lg text-center">
              Try our other tools: 
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/qr-code-scanner">QR Code Scanner</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/wifi-qr-code-generator">Wi‑Fi QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/text-qr-code-generator">Text QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/url-qr-code-generator">URL/Link QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/email-qr-code-generator">Email QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/phone-qr-code-generator">Phone Number QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/sms-qr-code-generator">SMS QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/whatsapp-qr-code-generator">WhatsApp QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/zoom-qr-code-generator">Zoom QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/skype-qr-code-generator">Skype QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/vcard-qr-code-generator">vCard QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/event-qr-code-generator">Event QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/bitcoin-qr-code-generator">Bitcoin QR Code Generator</a>,
            <a class="text-indigo-600 dark:text-indigo-400 hover:underline" href="https://www.alltoolai.com/location-qr-code-generator">Location QR Code Generator</a>.            </p>
        </section>
        
    </div>
</main>

<div id="footer-placeholder"></div>
    
<script>
document.addEventListener('DOMContentLoaded', () => {
    // DOM Element References
    const meetingIdInput = document.getElementById('meeting-id');
    const passwordInput = document.getElementById('password-input');
    const meetingTopicInput = document.getElementById('meeting-topic');
    const generateBtn = document.getElementById('generate-btn');
    const clearBtn = document.getElementById('clear-btn');
    const downloadPngBtn = document.getElementById('download-png-btn');
    const downloadPdfBtn = document.getElementById('download-pdf-btn');
    const qrCodePreview = document.getElementById('qr-code-preview');
    const previewPlaceholder = document.getElementById('preview-placeholder');
    const errorMessage = document.getElementById('error-message');
    const fgColorInput = document.getElementById('fg-color');
    const bgColorInput = document.getElementById('bg-color');

    // State Variables
    let qrCodeGenerated = false;
    let debounceTimeout = null;
    let errorTimeout = null;

    // --- Helpers ---

    const showError = (message) => {
        errorMessage.textContent = message;
        clearTimeout(errorTimeout);
        errorTimeout = setTimeout(clearError, 3000);
    };

    const clearError = () => {
        errorMessage.textContent = '';
    };

    const clearPreview = () => {
        qrCodePreview.innerHTML = '';
        previewPlaceholder.style.display = 'block';
        downloadPngBtn.disabled = true;
        downloadPdfBtn.disabled = true;
        qrCodeGenerated = false;
    };

    const resetTool = () => {
        meetingIdInput.value = '';
        passwordInput.value = '';
        meetingTopicInput.value = '';
        fgColorInput.value = '#2D8CFF';
        bgColorInput.value = '#ffffff';
        clearError();
        clearPreview();
    };

    // Determine if a string looks like a Zoom hashed pwd (base64url-like)
    const isLikelyHashedPwd = (pwd) => /^[A-Za-z0-9_-]{16,}$/.test(pwd);

    // Try to build the best Zoom URL based on input
    // - Accepts plain Meeting ID (with spaces/dashes), full Zoom https links, or zoommtg:// deep links.
    // - If a plain passcode is provided without a hashed pwd, we auto-use the zoommtg:// scheme so it works in the Zoom app.
    const buildZoomURL = (rawMeetingInput, rawPasscode) => {
        const value = (rawMeetingInput || '').trim();
        const pass = (rawPasscode || '').trim();
        let note = '';

        // If zoommtg deep link is provided, respect it and add pwd if needed
        if (/^zoommtg:\/\//i.test(value)) {
            if (pass && !/[\?&]pwd=/.test(value)) {
                const sep = value.includes('?') ? '&' : '?';
                return { url: `${value}${sep}pwd=${encodeURIComponent(pass)}`, note };
            }
            return { url: value, note };
        }

        // If a full HTTPS Zoom URL is provided, extract meeting and pwd
        if (/^https?:\/\//i.test(value) && /zoom\.us/i.test(value)) {
            try {
                const u = new URL(value);
                const pwdFromUrl = u.searchParams.get('pwd') || '';
                const idMatch = u.pathname.match(/\/j\/(\d+)/);
                const meetingIdFromUrl = idMatch ? idMatch[1] : '';

                if (!meetingIdFromUrl) {
                    return { url: '', note: 'Could not find a meeting ID in the provided URL.' };
                }

                // If user typed a plain passcode but URL has no hashed pwd, prefer deep link so passcode works
                if (!pwdFromUrl && pass && !isLikelyHashedPwd(pass)) {
                    note = 'Using Zoom app link so your passcode works without hashing.';
                    return { url: `zoommtg://zoom.us/join?confno=${meetingIdFromUrl}&pwd=${encodeURIComponent(pass)}`, note };
                }

                // Otherwise keep the same domain and include either existing hashed pwd or a user-provided hashed pwd
                const finalPwd = pwdFromUrl || (pass && isLikelyHashedPwd(pass) ? pass : '');
                const q = finalPwd ? `?pwd=${finalPwd}` : '';
                return { url: `${u.origin}/j/${meetingIdFromUrl}${q}`, note };
            } catch (e) {
                return { url: '', note: 'Invalid Zoom URL.' };
            }
        }

        // Otherwise treat as Meeting ID (sanitize to digits)
        const meetingId = value.replace(/\D/g, '');
        if (!meetingId) {
            return { url: '', note: 'Meeting ID is required.' };
        }

        if (pass) {
            if (isLikelyHashedPwd(pass)) {
                return { url: `https://zoom.us/j/${meetingId}?pwd=${encodeURIComponent(pass)}`, note };
            }
            // Plain passcode -> use Zoom app deep link
            note = 'Using Zoom app link so your passcode works without hashing.';
            return { url: `zoommtg://zoom.us/join?confno=${meetingId}&pwd=${encodeURIComponent(pass)}`, note };
        }

        return { url: `https://zoom.us/j/${meetingId}`, note };
    };

    // --- Core Functions ---

    const generateQRCode = () => {
        clearError();

        const meetingInput = meetingIdInput.value;
        const password = passwordInput.value;
        const topic = meetingTopicInput.value.trim();

        const { url, note } = buildZoomURL(meetingInput, password);
        if (!url) {
            showError('Meeting ID or URL is required.');
            return;
        }

        if (note) showError(note); // show helpful notice if we switched to deep link

        qrCodePreview.innerHTML = '';
        const previewSize = 256;

        const tempContainer = document.createElement('div');
        try {
            new QRCode(tempContainer, {
                text: url,
                width: previewSize,
                height: previewSize,
                colorDark: fgColorInput.value,
                colorLight: bgColorInput.value,
                correctLevel: QRCode.CorrectLevel.H
            });
        } catch (e) {
            showError('Error generating QR Code.');
            console.error(e);
            clearPreview();
            return;
        }

        setTimeout(() => {
            const qrElement = tempContainer.querySelector('canvas') || tempContainer.querySelector('img');
            if (!qrElement) {
                showError('Could not generate QR code element.');
                return;
            }

            const topicHeight = topic ? 40 : 0;
            const previewCanvas = document.createElement('canvas');
            previewCanvas.width = previewSize;
            previewCanvas.height = previewSize + topicHeight;
            const ctx = previewCanvas.getContext('2d');

            ctx.fillStyle = bgColorInput.value;
            ctx.fillRect(0, 0, previewCanvas.width, previewCanvas.height);

            if (topic) {
                ctx.font = 'bold 20px sans-serif';
                ctx.fillStyle = fgColorInput.value;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(topic, previewSize / 2, topicHeight / 2, previewSize - 20);
            }

            // drawImage works for both canvas and img elements
            ctx.drawImage(qrElement, 0, topicHeight, previewSize, previewSize);

            qrCodePreview.appendChild(previewCanvas);
            previewPlaceholder.style.display = 'none';
            downloadPngBtn.disabled = false;
            downloadPdfBtn.disabled = false;
            qrCodeGenerated = true;
        }, 50);
    };

    const downloadHandler = (format) => {
        if (!qrCodeGenerated) {
            showError('Please generate a QR code first.');
            return;
        }

        if (format === 'pdf' && typeof window.jspdf === 'undefined') {
            downloadPdfBtn.textContent = 'Loading PDF Library...';
            downloadPdfBtn.disabled = true;
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
            script.onload = () => {
                initiateDownload(format);
                downloadPdfBtn.textContent = 'Download PDF';
                downloadPdfBtn.disabled = false;
            };
            script.onerror = () => {
                showError('Failed to load PDF library. Please try again.');
                downloadPdfBtn.textContent = 'Download PDF';
                downloadPdfBtn.disabled = false;
            };
            document.head.appendChild(script);
        } else {
            initiateDownload(format);
        }
    };

    const initiateDownload = (format) => {
        const meetingInput = meetingIdInput.value;
        const password = passwordInput.value;
        const topic = meetingTopicInput.value.trim();

        const { url } = buildZoomURL(meetingInput, password);
        if (!url) {
            showError('Invalid meeting info. Regenerate the QR code.');
            return;
        }

        const highRes = 1200;
        const margin = 100;
        const topicHeight = topic ? 200 : 0;

        const canvasWidth = highRes + margin * 2;
        const canvasHeight = highRes + margin * 2 + topicHeight;

        const tempContainer = document.createElement('div');
        tempContainer.style.position = 'absolute';
        tempContainer.style.left = '-9999px';
        document.body.appendChild(tempContainer);

        try {
            new QRCode(tempContainer, {
                text: url,
                width: highRes,
                height: highRes,
                colorDark: fgColorInput.value,
                colorLight: bgColorInput.value,
                correctLevel: QRCode.CorrectLevel.H
            });

            setTimeout(() => {
                const srcEl = tempContainer.querySelector('canvas') || tempContainer.querySelector('img');
                if (!srcEl) {
                    showError('Failed to generate high-resolution QR code.');
                    document.body.removeChild(tempContainer);
                    return;
                }

                const finalCanvas = document.createElement('canvas');
                finalCanvas.width = canvasWidth;
                finalCanvas.height = canvasHeight;
                const ctx = finalCanvas.getContext('2d');

                ctx.fillStyle = bgColorInput.value;
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);

                if (topic) {
                    ctx.font = 'bold 80px sans-serif';
                    ctx.fillStyle = fgColorInput.value;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(topic, canvasWidth / 2, (margin + topicHeight) / 2, canvasWidth - 40);
                }

                ctx.drawImage(srcEl, margin, margin + topicHeight, highRes, highRes);

                if (format === 'png') {
                    const link = document.createElement('a');
                    link.href = finalCanvas.toDataURL('image/png', 1.0);
                    link.download = 'zoom-qr-code.png';
                    link.click();
                } else if (format === 'pdf') {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF({ orientation: 'portrait', unit: 'px', format: [canvasWidth, canvasHeight] });
                    doc.addImage(finalCanvas.toDataURL('image/png', 1.0), 'PNG', 0, 0, canvasWidth, canvasHeight);
                    doc.save('zoom-qr-code.pdf');
                }

                document.body.removeChild(tempContainer);
            }, 100);

        } catch (e) {
            showError('Error during file generation.');
            console.error(e);
            document.body.removeChild(tempContainer);
        }
    };

    const debouncedGenerate = () => {
        clearTimeout(debounceTimeout);
        if (!qrCodeGenerated) return;
        debounceTimeout = setTimeout(generateQRCode, 200);
    };

    // --- Event Listeners ---
    generateBtn.addEventListener('click', generateQRCode);
    clearBtn.addEventListener('click', resetTool);
    meetingTopicInput.addEventListener('input', debouncedGenerate);
    fgColorInput.addEventListener('input', debouncedGenerate);
    bgColorInput.addEventListener('input', debouncedGenerate);
    downloadPngBtn.addEventListener('click', () => downloadHandler('png'));
    downloadPdfBtn.addEventListener('click', () => downloadHandler('pdf'));
});
</script>

</body>
</html>
